<form>
	<table>
		<tr><td></td><td><input type="hidden" name="companyId"></td></tr>
		<tr><td>Company Name</td><td><input type="text" name="companyName"></td></tr>
		<tr><td>Company Description</td><td><input type="text" name="companyDescription"></td></tr>
		<tr><td>Business Field</td><td><select name="companyBusinessField" id="companyBusinessField"></select></td></tr>
		<tr><td>DateTime Created</td><td><input type="datetimepicker" name="companyDateTimeCreated"></td></tr>
		<tr><td>Enabled</td><td><select name="companyStatus" id="companyStatus"></select></td></tr>
		<tr><td>Added By</td><td><input name="companyAddedBy" id="companyAddedBy"></select></td></tr>

		<tr><td colspan="2"><div id="companyUpdateButton">Add</div></td></tr>
	</table>
</form>

<style type="text/css">
	form {
		font-size: 0.8em;
	}
	form select {
		width: 100%;
	}
	form div {
		width: 100%;
	}
</style>

<script type="text/javascript">	
	$.each(arrayGlobalBunessField, function(index,object){
		$('#companyBusinessField')
		.append($("<option></option>")
			.attr("value", object.Id)
			.text(object.Name));
	});      
	$.each(arrayGlobalStatus, function(index,object){
		$('#companyStatus')
		.append($("<option></option>")
			.attr("value", object.Id)
			.text(object.Name));
	});  

	$('[name="companyId"]').val(company.Id);
	$('[name="companyName"]').val(company.Name);
	$('[name="companyDescription"]').val(company.Description);

	$('[name="companyBusinessField"] option').val(company.BusinessField);
	$('[name="companyStatus"] option').val(company.Status);


	$('[name="companyDateTimeCreated"]').val(company.DateTimeCreated);
	$('[name="companyAddedBy"]').val(getNameUser(company.AddedBy));

	$('[name="companyDateTimeCreated"]').attr("disabled", true);
	$('[name="companyAddedBy"]').attr("disabled", true);




	$('#companyUpdateButton').button().click(function() {

		var name = document.getElementsByName('companyName')[0].value;
		var description = document.getElementsByName('companyDescription')[0].value;
		var businessField = document.getElementsByName('companyBusinessField')[0].value;
		var user = JSON.parse(sessionStorage.getItem('user'));
		var addedBy = user.Id;

		$.post('application/model/set/company.php',{Name:name, Description:description, BusinessField:businessField, AddedBy:addedBy}, function(json){
			var result = json.result[0];
			if (result.Status == "SUCCESS") {
				notify(result.Message);
			} else {
				notifyError(result.Message);
			}
		}, 'json');
	});


</script>

